(function(a){a.fn.nivoSlider=function(c){var d=a.extend({},a.fn.nivoSlider.defaults,c);return this.each(function(){var l={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};var k=a(this);k.data("nivo:vars",l);k.css("position","relative");k.addClass("nivoSlider");var e=k.children();e.each(function(){var q=a(this);var o="";if(!q.is("img")){if(q.is("a")){q.addClass("nivo-imageLink");o=q;}q=q.find("img:first");}var i=q.width();if(i==0){i=q.attr("width");}var p=q.height();if(p==0){p=q.attr("height");}if(i>k.width()){k.width(i);}if(p>k.height()){k.height(p);}if(o!=""){o.css("display","none");}q.css("display","none");l.totalSlides++;});if(d.startSlide>0){if(d.startSlide>=l.totalSlides){d.startSlide=l.totalSlides-1;}l.currentSlide=d.startSlide;}if(a(e[l.currentSlide]).is("img")){l.currentImage=a(e[l.currentSlide]);}else{l.currentImage=a(e[l.currentSlide]).find("img:first");}if(a(e[l.currentSlide]).is("a")){a(e[l.currentSlide]).css("display","block");}k.css("background","url("+l.currentImage.attr("src")+") no-repeat");for(var h=0;h<d.slices;h++){var n=Math.round(k.width()/d.slices);if(h==d.slices-1){k.append(a('<div class="nivo-slice"></div>').css({left:(n*h)+"px",width:(k.width()-(n*h))+"px"}));}else{k.append(a('<div class="nivo-slice"></div>').css({left:(n*h)+"px",width:n+"px"}));}}k.append(a('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:d.captionOpacity}));if(l.currentImage.attr("title")!=""){var m=l.currentImage.attr("title");if(m.substr(0,1)=="#"){m=a(m).html();}a(".nivo-caption p",k).html(m);a(".nivo-caption",k).fadeIn(d.animSpeed);}var f=0;if(!d.manualAdvance&&e.length>1){f=setInterval(function(){b(k,e,d,false);},d.pauseTime);}if(d.directionNav){k.append('<div class="nivo-directionNav"><a class="nivo-prevNav">Prev</a><a class="nivo-nextNav">Next</a></div>');if(d.directionNavHide){a(".nivo-directionNav",k).hide();k.hover(function(){a(".nivo-directionNav",k).show();},function(){a(".nivo-directionNav",k).hide();});}a("a.nivo-prevNav",k).live("click",function(){if(l.running){return false;}clearInterval(f);f="";l.currentSlide-=2;b(k,e,d,"prev");});a("a.nivo-nextNav",k).live("click",function(){if(l.running){return false;}clearInterval(f);f="";b(k,e,d,"next");});}if(d.controlNav){var j=a('<div class="nivo-controlNav"></div>');k.append(j);for(var h=0;h<e.length;h++){if(d.controlNavThumbs){var g=e.eq(h);if(!g.is("img")){g=g.find("img:first");}if(d.controlNavThumbsFromRel){j.append('<a class="nivo-control" rel="'+h+'"><img src="'+g.attr("rel")+'" alt="" /></a>');}else{j.append('<a class="nivo-control" rel="'+h+'"><img src="'+g.attr("src").replace(d.controlNavThumbsSearch,d.controlNavThumbsReplace)+'" alt="" /></a>');}}else{j.append('<a class="nivo-control" rel="'+h+'">'+(h+1)+"</a>");}}a(".nivo-controlNav a:eq("+l.currentSlide+")",k).addClass("active");a(".nivo-controlNav a",k).live("click",function(){if(l.running){return false;}if(a(this).hasClass("active")){return false;}clearInterval(f);f="";k.css("background","url("+l.currentImage.attr("src")+") no-repeat");l.currentSlide=a(this).attr("rel")-1;b(k,e,d,"control");});}if(d.keyboardNav){a(window).keypress(function(i){if(i.keyCode=="37"){if(l.running){return false;}clearInterval(f);f="";l.currentSlide-=2;b(k,e,d,"prev");}if(i.keyCode=="39"){if(l.running){return false;}clearInterval(f);f="";b(k,e,d,"next");}});}if(d.pauseOnHover){k.hover(function(){l.paused=true;clearInterval(f);f="";},function(){l.paused=false;if(f==""&&!d.manualAdvance){f=setInterval(function(){b(k,e,d,false);},d.pauseTime);}});}k.bind("nivo:animFinished",function(){l.running=false;a(e).each(function(){if(a(this).is("a")){a(this).css("display","none");}});if(a(e[l.currentSlide]).is("a")){a(e[l.currentSlide]).css("display","block");}if(f==""&&!l.paused&&!d.manualAdvance){f=setInterval(function(){b(k,e,d,false);},d.pauseTime);}d.afterChange.call(this);});});function b(k,e,f,g){var l=k.data("nivo:vars");if((!l||l.stop)&&!g){return false;}f.beforeChange.call(this);if(!g){k.css("background","url("+l.currentImage.attr("src")+") no-repeat");}else{if(g=="prev"){k.css("background","url("+l.currentImage.attr("src")+") no-repeat");}if(g=="next"){k.css("background","url("+l.currentImage.attr("src")+") no-repeat");}}l.currentSlide++;if(l.currentSlide==l.totalSlides){l.currentSlide=0;f.slideshowEnd.call(this);}if(l.currentSlide<0){l.currentSlide=(l.totalSlides-1);}if(a(e[l.currentSlide]).is("img")){l.currentImage=a(e[l.currentSlide]);}else{l.currentImage=a(e[l.currentSlide]).find("img:first");}if(f.controlNav){a(".nivo-controlNav a",k).removeClass("active");a(".nivo-controlNav a:eq("+l.currentSlide+")",k).addClass("active");}if(l.currentImage.attr("title")!=""){var n=l.currentImage.attr("title");if(n.substr(0,1)=="#"){n=a(n).html();}if(a(".nivo-caption",k).css("display")=="block"){a(".nivo-caption p",k).fadeOut(f.animSpeed,function(){a(this).html(n);a(this).fadeIn(f.animSpeed);});}else{a(".nivo-caption p",k).html(n);}a(".nivo-caption",k).fadeIn(f.animSpeed);
}else{a(".nivo-caption",k).fadeOut(f.animSpeed);}var h=0;a(".nivo-slice",k).each(function(){var i=Math.round(k.width()/f.slices);a(this).css({height:"0px",opacity:"0",background:"url("+l.currentImage.attr("src")+") no-repeat -"+((i+(h*i))-i)+"px 0%"});h++;});if(f.effect=="random"){var m=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade");l.randAnim=m[Math.floor(Math.random()*(m.length+1))];if(l.randAnim==undefined){l.randAnim="fade";}}if(f.effect.indexOf(",")!=-1){var m=f.effect.split(",");l.randAnim=a.trim(m[Math.floor(Math.random()*m.length)]);}l.running=true;if(f.effect=="sliceDown"||f.effect=="sliceDownRight"||l.randAnim=="sliceDownRight"||f.effect=="sliceDownLeft"||l.randAnim=="sliceDownLeft"){var j=0;var h=0;var p=a(".nivo-slice",k);if(f.effect=="sliceDownLeft"||l.randAnim=="sliceDownLeft"){p=a(".nivo-slice",k)._reverse();}p.each(function(){var i=a(this);i.css("top","0px");if(h==f.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){k.trigger("nivo:animFinished");});},(100+j));}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed);},(100+j));}j+=50;h++;});}else{if(f.effect=="sliceUp"||f.effect=="sliceUpRight"||l.randAnim=="sliceUpRight"||f.effect=="sliceUpLeft"||l.randAnim=="sliceUpLeft"){var j=0;var h=0;var p=a(".nivo-slice",k);if(f.effect=="sliceUpLeft"||l.randAnim=="sliceUpLeft"){p=a(".nivo-slice",k)._reverse();}p.each(function(){var i=a(this);i.css("bottom","0px");if(h==f.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){k.trigger("nivo:animFinished");});},(100+j));}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed);},(100+j));}j+=50;h++;});}else{if(f.effect=="sliceUpDown"||f.effect=="sliceUpDownRight"||l.randAnim=="sliceUpDown"||f.effect=="sliceUpDownLeft"||l.randAnim=="sliceUpDownLeft"){var j=0;var h=0;var o=0;var p=a(".nivo-slice",k);if(f.effect=="sliceUpDownLeft"||l.randAnim=="sliceUpDownLeft"){p=a(".nivo-slice",k)._reverse();}p.each(function(){var i=a(this);if(h==0){i.css("top","0px");h++;}else{i.css("bottom","0px");h=0;}if(o==f.slices-1){setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){k.trigger("nivo:animFinished");});},(100+j));}else{setTimeout(function(){i.animate({height:"100%",opacity:"1.0"},f.animSpeed);},(100+j));}j+=50;o++;});}else{if(f.effect=="fold"||l.randAnim=="fold"){var j=0;var h=0;a(".nivo-slice",k).each(function(){var q=a(this);var i=q.width();q.css({top:"0px",height:"100%",width:"0px"});if(h==f.slices-1){setTimeout(function(){q.animate({width:i,opacity:"1.0"},f.animSpeed,"",function(){k.trigger("nivo:animFinished");});},(100+j));}else{setTimeout(function(){q.animate({width:i,opacity:"1.0"},f.animSpeed);},(100+j));}j+=50;h++;});}else{if(f.effect=="fade"||l.randAnim=="fade"){var h=0;a(".nivo-slice",k).each(function(){a(this).css("height","100%");if(h==f.slices-1){a(this).animate({opacity:"1.0"},(f.animSpeed*2),"",function(){k.trigger("nivo:animFinished");});}else{a(this).animate({opacity:"1.0"},(f.animSpeed*2));}h++;});}}}}}}};a.fn.nivoSlider.defaults={effect:"random",slices:15,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){}};a.fn._reverse=[].reverse;})(jQuery);